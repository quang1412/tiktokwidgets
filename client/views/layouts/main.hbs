<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../css/text-animation.css" />

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://kit.fontawesome.com/d83ecd5594.js"
      crossorigin="anonymous"
    ></script> 
    
    <script>
      window.widgetid = '{{widgetid}}';
      console.log('widgetid:', window.widgetid)
      window.setting = { {{#each setting}} "{{@key}}": "{{this}}", {{/each}}  }
      console.log('setting:', window.setting)

      function generateOverlay() { 
        const url = ('obs?widgetid=' + window.widgetid)
        window.obsPreview = (window.obsPreview && !window.obsPreview.closed) ? window.obsPreview : window.open (url, "widget preview","menubar=0,resizable=1,width=800,height=400");
        window.obsPreview.focus()
      };

      window.onbeforeunload = function(){
        window.obsPreview && window.obsPreview.close()
      } 
    </script> 

    <script src="/connection.js?t=12312312"></script> 
    <script type="text/javascript">
    (async function(){ 
      window.connection = new window.TikTokIOConnection(window.widgetid, window.setting.username);
      {{!-- connection.on('connect', _ => { console.log('ðŸ“¡ Server connected') }) --}}

    })();
    </script>
    
    <style type="text/css">
      body{ font-size: 14px; } body * {transition: opacity 0.3s ease 0s;} table tbody td{ padding: 5px; } table tbody
      td:first-child{ white-space:nowrap; } table { width: 100%; } table tbody
      td[colspan]{ width: 100%; } span.animated-letter{ color:
      var(--bs-primary); } input[type="range"]{ position: relative; }
      input[type="range"]:after{ content: attr(prefix) attr(value) attr(subfix);
      position: absolute; right: 0; font-size: 90%; margin-top: -10px; color:
      var(--bs-gray); } input[type="radio"], input[type="checkbox"]{ cursor:
      pointer; } @media only screen and (max-width: 600px) { tr { display: flex;
      flex-direction: column; } }
    </style>
  </head>
  <body class="my-3">
    {{{body}}}
  </body>
</html>